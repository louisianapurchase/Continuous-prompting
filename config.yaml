# Continuous Prompting Framework Configuration

# LLM Configuration
llm:
  provider: "ollama"
  model: "mistral"  # Using mistral (7B) - fits in RTX 4060 8GB VRAM
  base_url: "http://localhost:11434"
  temperature: 0.7
  max_tokens: 512  # Reduced to avoid memory issues
  timeout: 30
  num_gpu: 1  # Use GPU (RTX 4060)

# Data Stream Configuration
data:
  update_interval: 0.5  # seconds between data updates (faster for real-time feel)
  source: "csv"         # Options: sample, csv

  # For CSV source (real historical data from Yahoo Finance)
  csv_path: "data/raw/real_trading_data_1m_1d.csv"

  # Sample data configuration
  sample:
    symbols: ["AAPL", "GOOGL", "MSFT", "TSLA"]
    price_volatility: 0.001  # 0.1% price movement range (realistic for 1-second intervals)
    volume_range: [1000, 10000]

  # News injection configuration
  news:
    enabled: true           # Enable/disable news events
    events_per_day: 1.5     # Average number of news events per day (1-2 events)

# Portfolio Trading Configuration
trading:
  enabled: true                # Enable/disable portfolio trading
  initial_cash_per_symbol: 1000  # Starting cash per stock symbol ($1000 per stock = $4000 total for 4 stocks)

# Prompting Strategy Configuration
strategy:
  type: "autonomous"  # Autonomous strategy with LLM self-activation

  # Autonomous strategy settings
  # LLM decides when to activate itself using modern AI techniques
  autonomous:
    # How often to ask the LLM if it wants to activate (lower = more frequent checks)
    activation_check_interval: 5

    # Minimum confidence level (0.0-1.0) required for LLM to activate
    # Higher = more selective, Lower = more responsive
    min_confidence_threshold: 0.7

    # Enable Chain-of-Thought reasoning (step-by-step thinking)
    # This dramatically improves decision quality by making the LLM explain its reasoning
    enable_chain_of_thought: true

    # Enable self-reflection (LLM critiques its own decisions)
    # This catches mistakes before executing trades
    enable_self_reflection: true

    # Enable autonomous trading decisions
    enable_trading: true

# Memory Management Configuration
memory:
  type: "sliding_window"  # Options: sliding_window, chromadb, none

  # Sliding Window Memory Settings
  sliding_window:
    window_size: 20           # Number of recent items to keep in full detail
    summary_batch_size: 10    # Items per summary batch
    max_summaries: 10         # Maximum number of summaries to keep
    enable_llm_summary: false # Use LLM for summaries (experimental)

  # ChromaDB Vector Memory Settings
  chromadb:
    collection_name: "trading_data"
    persist_directory: "./data/chroma"
    top_k: 5                  # Number of similar items to retrieve
    embedding_model: "all-MiniLM-L6-v2"

# Prompt Templates
prompts:
  system_prompt: |
    You are an expert trading analyst monitoring real-time market data.

    IMPORTANT GUIDELINES:
    - Only respond when you see significant patterns, opportunities, or risks
    - Be concise and actionable - focus on what matters
    - When trading is enabled, make clear BUY/SELL/HOLD decisions with reasoning
    - Consider the entire portfolio, not just individual stocks
    - Don't respond to normal market noise - only meaningful events
  
  continuous_prompt: |
    New market data:
    {data}
    
    Recent history:
    {history}
    
    What do you observe? Any significant patterns or recommendations?
  
  event_prompt: |
    ALERT: Significant event detected!
    Event Type: {event_type}
    Current Data: {data}
    Context: {context}
    
    Please analyze this situation and provide your assessment.

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_conversations: true
  conversation_dir: "logs/conversations"
  save_metrics: true
  metrics_dir: "logs/metrics"
  console_output: true

# Experiment Tracking
experiment:
  name: "default_experiment"
  description: "Testing continuous prompting strategies"
  save_outputs: true
  output_dir: "outputs"

