# Continuous Prompting Framework Configuration

# LLM Configuration
llm:
  provider: "ollama"
  model: "mistral"  # Options: mistral, llama2:7b, phi, tinyllama, etc.
  base_url: "http://localhost:11434"
  temperature: 0.7
  max_tokens: 2048
  timeout: 30

# Data Stream Configuration
data:
  update_interval: 1.0  # seconds between data updates
  source: "sample"      # Options: sample, csv, random

  # For CSV source
  csv_path: "data/raw/trading_data.csv"

  # Sample data configuration
  sample:
    symbols: ["AAPL", "GOOGL", "MSFT", "TSLA"]
    price_volatility: 0.02  # 2% price movement range
    volume_range: [1000, 10000]

  # News injection configuration
  news:
    enabled: true           # Enable/disable news events
    events_per_day: 1.5     # Average number of news events per day (1-2 events)

# Portfolio Trading Configuration
trading:
  enabled: true                  # Enable/disable portfolio trading
  initial_cash_per_symbol: 1000  # Starting cash allocation per stock ($1000 default)

# Prompting Strategy Configuration
strategy:
  type: "reactive"  # Options: continuous, event_driven, reactive

  # Continuous strategy settings
  continuous:
    batch_size: 1  # Number of data points before prompting
    include_history: true
    max_history_length: 10  # Number of previous data points to include

  # Event-driven strategy settings
  event_driven:
    triggers:
      - type: "price_change"
        threshold: 0.05  # 5% price change
      - type: "volume_spike"
        threshold: 2.0   # 2x average volume
      - type: "time_interval"
        interval: 10     # seconds

  # Reactive strategy settings (RECOMMENDED)
  # LLM sees all data but only responds when something important happens
  reactive:
    check_interval: 1        # Check triggers every N data points
    alert_cooldown: 60       # Minimum seconds between alerts for same symbol
    triggers:
      - type: "price_change"
        threshold: 0.03      # 3% price change triggers alert
      - type: "volume_spike"
        threshold: 2.5       # 2.5x average volume triggers alert
      - type: "news_event"   # Any news event triggers alert
      - type: "pattern"
        pattern_type: "consecutive_moves"
        count: 3             # 3 consecutive moves in same direction
      - type: "time_interval"
        interval: 300        # Periodic check-in every 300 data points (~5 min)

# Memory Management Configuration
memory:
  type: "sliding_window"  # Options: sliding_window, chromadb, none

  # Sliding Window Memory Settings
  sliding_window:
    window_size: 20           # Number of recent items to keep in full detail
    summary_batch_size: 10    # Items per summary batch
    max_summaries: 10         # Maximum number of summaries to keep
    enable_llm_summary: false # Use LLM for summaries (experimental)

  # ChromaDB Vector Memory Settings
  chromadb:
    collection_name: "trading_data"
    persist_directory: "./data/chroma"
    top_k: 5                  # Number of similar items to retrieve
    embedding_model: "all-MiniLM-L6-v2"

# Prompt Templates
prompts:
  system_prompt: |
    You are a trading data analyst. You receive streaming market data in real-time.
    Your role is to observe patterns, identify significant events, and provide insights
    when appropriate. Be concise and focus on actionable observations.
  
  continuous_prompt: |
    New market data:
    {data}
    
    Recent history:
    {history}
    
    What do you observe? Any significant patterns or recommendations?
  
  event_prompt: |
    ALERT: Significant event detected!
    Event Type: {event_type}
    Current Data: {data}
    Context: {context}
    
    Please analyze this situation and provide your assessment.

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_conversations: true
  conversation_dir: "logs/conversations"
  save_metrics: true
  metrics_dir: "logs/metrics"
  console_output: true

# Experiment Tracking
experiment:
  name: "default_experiment"
  description: "Testing continuous prompting strategies"
  save_outputs: true
  output_dir: "outputs"

